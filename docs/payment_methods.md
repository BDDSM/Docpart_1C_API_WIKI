# Справочник виды платежей

Метод возвращает список возможных видов платежей сайта

Операция: **get_accounting_codes**

Параметры запроса:
|**Параметр**|**Пример заполнения**|**Описание**|
|---|---|---|
|tech_key *|TEST_KEY_FROM_SETTINGS|Строка – Ключ для вызова скриптов|

Результат запроса представляет собой структуру с данными:

|**Поле** |**Описание** |
|---|---|
|status|Булево – статус выполнения метода|
|message|Строка – всегда возвращает текст «ОК»|
|data|Запрашиваемые данные|

При успешном выполнении метод возвращает данные [data]:

|**Поле** |**Описание** |
|---|---|
|id|Число – Идентификатор вида платежа|
|name|Число – Наименование|
|income|Число, Если 1, то данный вид платежа используется для приходных операций|


# Получение транзакций оплаты 

Метод возвращает список транзакций оплаты проведенных на сайте

Операция: **get_payments**

Параметры запроса:

|**Параметр**|**Пример заполнения**|**Описание**|
|---|---|---|
|tech_key *|TEST_KEY_FROM_SETTINGS|Строка – Ключ для вызова скриптов|
|time_from *|10.01.2019|Дата – Начало периода получения заказов|
|time_to|15.01.2019|Дата – Окончание периода получения заказов|
|payment_id|10|Идентификатор транзакции|
|operation_code|7|Код операции из справочника|
|income|1|Вид операции: 1 – приход, 0- расход|

Результат запроса представляет собой структуру с данными:

|**Поле** |**Описание** |
|---|---|
|status|Булево – статус выполнения метода|
|message|Строка – всегда возвращает текст «ОК»|
|data|Запрашиваемые данные|

При успешном выполнении метод возвращает данные [data]:

|**Поле** |**Описание** |
|---|---|
|payment_id|Число – Идентификатор транзакции|
|user_id|Число – Идентификатор пользователя|
|time|Дата / время – Дата и время транзакции|
|income|Число, Вид операции: 1 – приход, 0- расход|
|pay_orders|Число, Идентификатор заказа для которого производится оплата|
|amount|Число, Сумма транзакции|
|operation_code|Число, Код операции|




# Добавление транзакции оплаты

Метод добавляет новую транзакцию оплаты на сайте. Данный метод используется для пополнения баланса пользователя и переноса денежных средств с баланса на заказ. 
Если в параметрах запроса не указан id заказа, то оплата будет зачислена на баланс пользователя.
Если id заказа указан, то для указанная сумма будет перенесена с баланса на заказ. 

Операция: **add_payments**

Параметры запроса:

|**Параметр**|**Пример заполнения**|**Описание**|
|---|---|---|
|tech_key *|TEST_KEY_FROM_SETTINGS|Строка – Ключ для вызова скриптов|
|user_id *|2|Число – Идентификатор пользователя|
|operation_id *|1|Число – Идентификатор вида платежа|
|amount *|2000|Число - Сумма платежа|
|order_id|2|Число – Идентификатор заказа|
|income|1|Число - 1 если платеж входящий|
|tech_value|1|Строка - техническое значение. не используется|

Результат запроса представляет собой структуру с данными:

|**Поле** |**Описание** |
|---|---|
|status|Булево – статус выполнения метода|
|message|Строка – всегда возвращает текст «ОК»|
|data|Запрашиваемые данные|

При успешном выполнении метод возвращает данные [data]:

|**Параметр**|**Пример заполнения**|**Описание**|
|---|---|---|
|tech_key *|TEST_KEY_FROM_SETTINGS|Строка – Ключ для вызова скриптов|
|order_id|2|Число – Идентификатор заказа|
|operation_id|1|Число – Идентификатор вида платежа|
|amount|2000|Число - Сумма платежа|
|income|1|Число - 1 если платеж входящий|
|tech_value|1|Строка - техническое значение. не используется|
|time|20.04.2020 21:23:00|Строка - Время записи транзакции|
|result|true|Булево - Результат записи транзакции|
|message|Wrong order or user id|Строка - Описание ошибки|
|payment_id|12|Число - Идентификатор созданной транзакции|

